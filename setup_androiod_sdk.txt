# setup android sdk on Ubuntu

sudo apt-get install curl unzip openjdk-8-jdk

ls ~/Android/Sdk/

rm -r ~/Android/Sdk/

mkdir -p ~/Android/Sdk/

curl https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip -o ~/Android/Sdk/android-sdk.zip

unzip ~/Android/Sdk/android-sdk.zip -d ~/Android/Sdk/

rm ~/Android/Sdk/android-sdk.zip

~/Android/Sdk/tools/bin/sdkmanager "tools"

~/Android/Sdk/tools/bin/sdkmanager --list

~/Android/Sdk/tools/bin/sdkmanager --licenses

~/Android/Sdk/tools/bin/sdkmanager "build-tools;27.0.3" "build-tools;28.0.3" "build-tools;29.0.2"

~/Android/Sdk/tools/bin/sdkmanager "emulator" "patcher;v4" "platform-tools"

~/Android/Sdk/tools/bin/sdkmanager "platforms;android-29"

~/Android/Sdk/tools/bin/sdkmanager "system-images;android-27;google_apis_playstore;x86"

~/Android/Sdk/tools/bin/sdkmanager "system-images;android-29;google_apis_playstore;x86_64"

~/Android/Sdk/tools/bin/sdkmanager --list

~/Android/Sdk/tools/bin/sdkmanager --update


# setup android emulator

~/Android/Sdk/tools/bin/avdmanager -v list avd

~/Android/Sdk/tools/bin/avdmanager -v delete avd -n TestEmulator27
~/Android/Sdk/tools/bin/avdmanager -v delete avd -n TestEmulator29

~/Android/Sdk/tools/bin/avdmanager -v create avd -n TestEmulator27 --sdcard 500M --device "Nexus 5X" -k "system-images;android-27;google_apis_playstore;x86"
~/Android/Sdk/tools/bin/avdmanager -v create avd -n TestEmulator29 --sdcard 500M --device "Nexus 5X" -k "system-images;android-29;google_apis_playstore;x86_64"

~/Android/Sdk/tools/bin/avdmanager -v move avd -n TestEmulator29 -r TestEmulator


# run emulator
# https://developer.android.com/studio/run/emulator-acceleration?utm_source=android-studio#vm-linux

sudo apt-get install qemu-kvm libvirt-bin ubuntu-vm-builder bridge-utils
sudo kvm-ok

sudo chown username -R /dev/kvm
~/Android/Sdk/emulator/emulator -avd TestEmulator -no-window -no-audio -gpu swiftshader_indirect
~/Android/Sdk/emulator/emulator -avd TestEmulator -no-window -no-audio -gpu swiftshader_indirect -debug all

~/Android/Sdk/platform-tools/adb emu kill

~/Android/Sdk/platform-tools/adb shell settings put global window_animation_scale 0
~/Android/Sdk/platform-tools/adb shell settings put global transition_animation_scale 0
~/Android/Sdk/platform-tools/adb shell settings put global animator_duration_scale 0

# adb

~/Android/Sdk/platform-tools/adb devices
~/Android/Sdk/platform-tools/adb kill-server
~/Android/Sdk/platform-tools/adb start-server


# gradle

export ANDROID_HOME=$HOME/Android/Sdk
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$ANDROID_HOME/platform-tools
echo $ANDROID_HOME

chmod +x ./gradlew
./gradlew clean build --stacktrace



